
<!DOCTYPE html>
<html>
<head>
	<title>krpano.com - Mobile-VR Viewer</title>
	<meta name="viewport" content="target-densitydpi=device-dpi, width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, minimal-ui" />
	<style>
		body,html{height:100%;overflow:hidden;}
		body{ font-family:Arial, Helvetica, sans-serif; font-size:12px; color:#FFFFFF; background-color:#000000; margin:0; padding:0; }
	</style>
	<script src="krpano.js"></script>
</head>
<body>

	<div id="viewersDiv" style="position:absolute;  left:0; top:0; width:100%; height:100%;" ontouchstart="requestfullscreen(this);">
		<div id="krpanoLeftEyeDiv"  style="position:absolute; left:0;   top:0; width:50%; height:100%;"></div>
		<div id="krpanoRightEyeDiv" style="position:absolute; left:50%; top:0; width:50%; height:100%;"></div>
	</div>

	<script>

		// embed the krpano viewers
		embedpano({html5:"only+webgl", id:"krpanoLeftEyeViewer",  target:"krpanoLeftEyeDiv",  xml:"mobilevr.xml", vars:{side:"left",  cubepathsidepostfix:"-L.tiles"}, passQueryParameters:true});
		embedpano({html5:"only+webgl", id:"krpanoRightEyeViewer", target:"krpanoRightEyeDiv", xml:"mobilevr.xml", vars:{side:"right", cubepathsidepostfix:"-R.tiles"}, passQueryParameters:true});


		// html5 fullscreen api
		function requestfullscreen(div)
		{
			var fs = ["requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","webkitRequestFullScreen","msRequestFullscreen"];

			for (var i=0; i<fs.length; i++)
			{
				if( div[fs[i]] )
				{
					div[fs[i]]();
					break;
				}
			}
		}


		// sync viewer movement
		function sync_1to2()
		{
			var krpano1 = document.getElementById("krpanoLeftEyeViewer");
			var krpano2 = document.getElementById("krpanoRightEyeViewer");

			krpano2.set("syncother",    false);
			krpano2.set("view.hlookat", krpano1.get("view.hlookat"));
			krpano2.set("view.vlookat", krpano1.get("view.vlookat"));
			krpano2.set("view.camroll", krpano1.get("view.camroll"));
			krpano2.set("view.fov",     krpano1.get("view.fov"));
		}
		
		function sync_2to1()
		{
			var krpano1 = document.getElementById("krpanoLeftEyeViewer");
			var krpano2 = document.getElementById("krpanoRightEyeViewer");

			krpano1.set("syncother",    false);
			krpano1.set("view.hlookat", krpano2.get("view.hlookat"));
			krpano1.set("view.vlookat", krpano2.get("view.vlookat"));
			krpano1.set("view.camroll", krpano2.get("view.camroll"));
			krpano1.set("view.fov",     krpano2.get("view.fov"));
		}
		
		function sync_set(variable, value)
		{
			var krpano1 = document.getElementById("krpanoLeftEyeViewer");
			var krpano2 = document.getElementById("krpanoRightEyeViewer");
			
			krpano1.set(variable, value);
			krpano2.set(variable, value);
		}

	</script>

</body>
</html>
